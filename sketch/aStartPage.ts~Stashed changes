// explanation of game phase
// gamePhase = 0 = display start page, game has not started
// gamePhase = 1 = display game menu, game has not started
// gamePhase = 2 = display game area, game has started
// gamePhase = 3 = display game results, game has ended

window.addEventListener("load", init);

function init(): void {
  updatePhase();
}

function updatePhase(): void {
  let gamePhase: number = 0;
  let phase_0: any = document.querySelector(".phase-0");
  let phase_1: any = document.querySelector(".phase-1");
  let phase_2: any = document.querySelector(".phase-2");
  let phase_3: any = document.querySelector(".phase-3");

  if (gamePhase == 0) {
    console.log(phase_0);
    phase_0.style.display = "block";
    phase_1.style.display = "none";
    phase_2.style.display = "none";
    phase_3.style.display = "none";
    //hide all exept phase 0
  } else if (gamePhase == 1) {
    console.log(phase_1);
    phase_0.style.display = "none";
    phase_1.style.display = "block";
    phase_2.style.display = "none";
    phase_3.style.display = "none";
    //hide all exept phase 1
  } else if (gamePhase == 2) {
    console.log(phase_2);
    phase_0.style.display = "none";
    phase_1.style.display = "none";
    phase_2.style.display = "block";
    phase_3.style.display = "none";
    //hide all exept phase 2
  } else if (gamePhase == 3) {
    console.log(phase_3);
    phase_0.style.display = "none";
    phase_1.style.display = "none";
    phase_2.style.display = "none";
    phase_3.style.display = "block";
    //hide all exept phase 3
  }

  console.log("gamePhase:" + gamePhase);
  setupEventListenersClick(gamePhase);

  const guessSpan: number = 20; //make the user choose this with a range or dropdown

  // let instructions = new Instructions()
  let numberGenerator = new NumberGenerator();
  let rng = numberGenerator.random(guessSpan);
  console.log(rng);
}

function setupEventListenersClick(gamePhase: number) {
  toggleInstructions();
  submitPlayerName(gamePhase);
}

//Function when user click on submit
function submitPlayerName(gamePhase: number) {
  let submitNamePlayerButton: any = document.querySelector(".submitPlayerName");
  gamePhase = gamePhase;

  submitNamePlayerButton.addEventListener("click", function(gamePhase: number) {
    console.log("1");
    if (gamePhase == 0) {
      console.log("2");

      gamePhase = 1;
      updatePhase();
    }

    //else display a red border around the input field
  });
}

function toggleInstructions() {
  let toggleBtn: any = document.querySelector(".toggle-btn");
  let content: any = document.querySelector(".instructions .content");
  let open: Boolean = false;

  toggleBtn.addEventListener("click", function() {
    if (!open) {
      content.style.display = "block";
      open = true;
    } else if (open) {
      content.style.display = "none";
      open = false;
    }
  });
}
